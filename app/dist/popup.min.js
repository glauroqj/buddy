!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports){!function(){var config={apiKey:"AIzaSyCmL6EppiFzE8BrY_xMRV0k4VG_NtJ6IWU",authDomain:"buddy-339dc.firebaseapp.com",databaseURL:"https://buddy-339dc.firebaseio.com",projectId:"buddy-339dc",storageBucket:"buddy-339dc.appspot.com",messagingSenderId:"799103313911"};firebase.initializeApp(config),new Vue({name:"Buddy",el:"#buddy",data:{user:{},title:"",firstLogin:!0,weekend:!1,vote:!1,voted:{},errorForm:!1,company:"Sympla",name:"",sector:"",lastVote:"",loading:!1,gif:[],keyDay:"",someoneVote:"",message:!1},watch:{},mounted:function(){var vm=this;setInterval(function(){vm.user=JSON.parse(localStorage.getItem("Buddy-Login")),""===vm.user||null===vm.user||void 0===vm.user?vm.firstLogin=!0:(vm.firstLogin=!1,vm.user=JSON.parse(localStorage.getItem("Buddy-Login")),vm.title=vm.user.name),vm.voted=localStorage.getItem("Buddy-Vote"),""===vm.voted||null===vm.voted||void 0===vm.voted?vm.vote=!1:vm.vote=!0},1e3);var day=moment().format("dddd");if("Saturday"==day||"Sunday"==day||"s√°bado"==day||"domingo"==day){$.ajax({url:"https://api.giphy.com/v1/gifs/random?api_key=xmSEm4iAty6mMRGFUm4k3bErZeqmYi1w&tag=happy&rating=G",method:"GET",dataType:"json"}).done(function(data){vm.gif=data.data,chrome.browserAction.setIcon({path:"../images/buddy-20x20.png"})}).fail(function(xhr){console.log("error",xhr)}),vm.weekend=!0}else vm.weekend=!1;this.lastVote=JSON.parse(localStorage.getItem("Buddy-Last-Vote")),null!=this.lastVote&&void 0!=this.lastVote||(this.lastVote=0),moment().format("DD/MM/YYYY")!=this.lastVote.day&&localStorage.removeItem("Buddy-Vote"),this.user=JSON.parse(localStorage.getItem("Buddy-Login")),""===this.user||null===this.user||void 0===this.user?this.firstLogin=!0:(this.firstLogin=!1,this.user=JSON.parse(localStorage.getItem("Buddy-Login")),this.title=this.user.name,this.getCustomMessage()),this.voted=localStorage.getItem("Buddy-Vote"),""===this.voted||null===this.voted||void 0===this.voted?this.vote=!1:this.vote=!0},methods:{reset:function(){this.vote=!1,this.firstLogin=!0,this.errorForm=!1},login:function(){var info={company:this.company,name:this.name,sector:this.sector};if(""!=this.sector)return localStorage.setItem("Buddy-Login",JSON.stringify(info)),this.firstLogin=!1,this.user=JSON.parse(localStorage.getItem("Buddy-Login")),this.title=this.user.name,void this.getCustomMessage();this.errorForm=!0},send:function(voteDay){var vm=this;this.vote=!0,this.loading=!0,moment().locale("pt-br");var day=moment().format("DD"),month=(moment().format("DD/MM/YYYY"),moment().format("MMMM")),year=moment().format("YYYY"),urlGET=config.databaseURL+"/"+vm.user.sector+"/"+year+"/"+month+"/"+day+".json";$.ajax({url:urlGET,method:"GET",dataType:"json"}).done(function(data){if(null!=data)return vm.keyDay=Object.keys(data),vm.someoneVote=data[vm.keyDay],vm.updateDataWithKeyDay(vm.keyDay,voteDay),console.log("Key day: "+vm.keyDay),void(vm.message="");vm.createFirstKeyDay(voteDay),console.log("Key day: "+vm.keyDay)}).fail(function(xhr){console.log("Error Key day: ",xhr)})},createFirstKeyDay:function(voteDay){var vm=this;moment().locale("pt-br");var day=moment().format("DD"),dateFormat=moment().format("DD/MM/YYYY"),month=moment().format("MMMM"),year=moment().format("YYYY"),urlPOST=config.databaseURL+"/"+vm.user.sector+"/"+year+"/"+month+"/"+day+".json",vote={vote:voteDay,month:month,date:dateFormat,quantVotes:1,mediaVotes:voteDay},lastVote={day:dateFormat};$.ajax({url:urlPOST,method:"POST",dataType:"json",data:JSON.stringify(vote)}).done(function(data){console.log("success",data),localStorage.setItem("Buddy-Vote",JSON.stringify(vote)),localStorage.setItem("Buddy-Last-Vote",JSON.stringify(lastVote)),vm.lastVote=JSON.parse(localStorage.getItem("Buddy-Last-Vote")),chrome.browserAction.setIcon({path:"../images/buddy-20x20.png"}),setTimeout(function(){vm.loading=!1},800)}).fail(function(xhr){console.log("error",xhr),setTimeout(function(){vm.loading=!1},800)})},updateDataWithKeyDay:function(keyday,voteDay){var vm=this;moment().locale("pt-br");var day=moment().format("DD"),dateFormat=moment().format("DD/MM/YYYY"),month=moment().format("MMMM"),year=moment().format("YYYY"),urlPATCH=config.databaseURL+"/"+vm.user.sector+"/"+year+"/"+month+"/"+day+"/"+[keyday]+".json",soma=0,media=0,quantTotalVotes=0;soma=parseInt(vm.someoneVote.vote)+voteDay,quantTotalVotes=parseInt(vm.someoneVote.quantVotes)+1,media=(soma/quantTotalVotes).toFixed(2);var vote={vote:soma,quantVotes:quantTotalVotes,mediaVotes:media},lastVote={day:dateFormat};$.ajax({url:urlPATCH,method:"PATCH",dataType:"json",data:JSON.stringify(vote)}).done(function(data){console.log("success",data),localStorage.setItem("Buddy-Vote",JSON.stringify(vote)),localStorage.setItem("Buddy-Last-Vote",JSON.stringify(lastVote)),vm.lastVote=JSON.parse(localStorage.getItem("Buddy-Last-Vote")),chrome.browserAction.setIcon({path:"../images/buddy-20x20.png"}),setTimeout(function(){vm.loading=!1},800)}).fail(function(xhr){console.log("error",xhr),setTimeout(function(){vm.loading=!1},800)})},getCustomMessage:function(){var vm=this,url=config.databaseURL+"/customMessage.json";$.ajax({url:url,method:"GET",dataType:"json"}).done(function(data){vm.message=data[Object.keys(data)],console.log(vm.message)}).fail(function(xhr){console.log("error",xhr)})}}})}()}]);